<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Zotov Oleg">
    <meta name="copyright" content="Zotov Oleg" />

    <title>Zadanie 8 </title>
<!-- В  JavaScript напишите сценарий, который по дате рождения человека определяет,
     надо ли сегодня его поздравить с днем рождения (за 3 дня до дня рождения напомнить, что надо купить подарок).	Веб (повышенный уровень) -->
    <style>
        h1 {
            color: rgb(0, 0, 0);
            text-align: center;
        }
 
        body {
            background-color: #E0E0E0;
            font-weight: bold;
        }
       
        input {
            font-weight: bold;
            height: 30px;
            width: 300px;
            display: block;
            margin-left: auto;
            margin-right: auto 
        }
    </style>
</head>
<body>
    <h1>Crолько осталось дней до дня рождения?</h1>
    <div><input type= button value="Расчитать количество дней" OnClick="daysLeft()"></div> 
    <script>
        function diffDays(date1, date2) {
            var year1 = date1.getFullYear(),
                year2 = date2.getFullYear(),
                month1 = date1.getMonth(),
                month2 = date2.getMonth(),
                day1 = date1.getDate(),
                day2 = date2.getDate();
            let d1 = new Date(year1, month1, day1),
                d2 = new Date(year2, month2, day2),
                // Смещение для уже полностью очищенных двух локальных дат
                offset1 = d1.getTimezoneOffset(),
                offset2 = d2.getTimezoneOffset(),
                diff = (offset1 - offset2) * 60000,
                days = (d2 - d1 + diff) / 86400000;
 
            return days;
        }
 
        function daysLeft() {
            var year = +prompt('enter year (format: YYYY)');
            var month = prompt('enter month (format: M)') - 1; 
            var day = +prompt('enter day');
 
            var today = new Date();
            var nextDate = month > today.getMonth() || (month === today.getMonth() && day >= today.getDate())
                ? new Date(today.getFullYear(), month, day)
                : new Date(today.getFullYear() + 1, month, day);
 
            alert(period(today, nextDate));
        }
 
        function period(d1 = new Date(), d2 = new Date()) {
            var e = [diffDays(d1, d2), "den", "dnya", "dnei"],
                value = e[0],
                rest = value % 100,
                str;
 
            if (!value) return "Segodnya Happy Bday!";
            
            if  (!(value >= 3)){
                return "Skoro prazdnik, kupite podarok!";
            } 
            
            else if (value === 1) return "Zavtra vas prazdnik!";
            
            if (rest >= 20) {
  rest = rest % 10;
}
 
        switch (rest) {
        case 1: str = e[1]; break;
        case 2:
        case 3:
        case 4: str = e[2]; break;
        default: str = e[3]; break;
        }
                    return "do vashego DR ostalos " + value + " " + str;
                }
    </script>
</body>
</html>